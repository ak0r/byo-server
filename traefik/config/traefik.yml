global:
  checkNewVersion: ${TRAEFIK_CHECK_NEW_VERSION:-false}'
  sendAnonymousUsage: ${TRAEFIK_SEND_ANONYMOUS_USAGE:-false}

# -- (Optional) Change Log Level and Format here...
#     - loglevels [DEBUG, INFO, WARNING, ERROR, CRITICAL]
#     - format [common, json, logfmt]
log:
 level: ${TRAEFIK_LOG_LEVEL:-ERROR}'
 format: json
 filePath: /logs/traefik.log

# -- (Optional) Enable Accesslog and change Format here...
#     - format [common, json, logfmt]
accesslog:
  format: json
  filePath: /logs/access.log

# -- (Optional) Enable API and Dashboard here, don't do in production
api:
  dashboard: true

# -- Change EntryPoints here...
entryPoints:
  web:
    address: ":${TRAEFIK_WEB_ENTRYPOINT:-80}" # Create the HTTP entrypoint on port 80
    # -- (Optional) Redirect all HTTP to HTTPS
    http:
      redirections:
        entryPoint:
          to: websecure
          scheme: https
  websecure:
    address: ":${TRAEFIK_WEBSECURE_ENTRYPOINT:-80}" # Create the HTTPS entrypoint on port 443
    http:
      middlewares:
        - secureHeaders@file
        - nofloc@file
      # tls:
      #   certResolver: letsencrypt
      #   domains:
      #     - main: changeme.com
      #       sans:
      #         - "*.changeme.com"
  # -- (Optional) Add custom Entrypoint
  # custom:
  #  address: :8080

# -- Configure your CertificateResolver here...
certificatesResolvers:
  staging:
    acme:
      email: ${ADMIN_EMAIL}
      storage: /certs/acme-staging.json
      caServer: "https://acme-staging-v02.api.letsencrypt.org/directory"
    #   -- (Optional) Remove this section, when using DNS Challenge
    #  httpChallenge:
    #    entryPoint: web
    #     -- (Optional) Configure DNS Challenge
    #     dnsChallenge:
    #       provider: your-resolver (e.g. cloudflare)
    #       resolvers:
    #         - "1.1.1.1:53"
    #         - "8.8.8.8:53"
  production:
    acme:
      email: ${ADMIN_EMAIL}
      storage: /certs/acme-production.json
      caServer: "https://acme-v02.api.letsencrypt.org/directory"
    #   -- (Optional) Remove this section, when using DNS Challenge
    #   httpChallenge:
    #     entryPoint: web
    #  -- (Optional) Configure DNS Challenge
    #  dnsChallenge:
    #    provider: your-resolver (e.g. cloudflare)
    #    resolvers:
    #      - "1.1.1.1:53"
    #      - "8.8.8.8:53"
  letsencrypt:
    acme:
      email: ${ADMIN_EMAIL}
      storage: /certs/acme-cloudflare.json
      keyType: EC384
      dnsChallenge:
        provider: cloudflare
        resolvers:
          - "1.1.1.1:53"
          - "1.0.0.1:53"

# -- (Optional) Disable TLS Cert verification check
serversTransport:
  insecureSkipVerify: true

# -- (Optional) Overwrite Default Certificates
#tls:
#  stores:
#    default:
#      defaultCertificate:
#        certFile: /config/certs/cert.pem
#        keyFile: /config/certs/cert-key.pem
# -- (Optional) Disable TLS version 1.0 and 1.1
#  options:
#    default:
#      minVersion: VersionTLS12

providers:
  docker:
    # -- (Optional) Enable this, if you want to expose all containers automatically
    exposedByDefault: ${TRAEFIK_EXPOSED_BY_DEFAULT:-false}
    network: ${DOCKER_EXT_NETWORK:-frontend}
  file:
    directory: /config
    # filename: /config/dynamic-config.yml
    watch: true